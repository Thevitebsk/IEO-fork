<!DOCTYPE html>
<html>
<head><title>Permanent Link</title></head>
<body>
<h1 id="error">Error: "link" argument not found</h1>
<p id="detailed">
    <br>
    This page is for showing permanent links generated by Interpret Esolangs Online, please <b>DON'T</b> access this directly.
</p>
<style>
.withdrawn {
    visibility: hidden;
}
.shown{
    visibility: visible;
}
</style>
<h3 id="link_t" class="withdrawn">Raw Link</h3><button onclick="copytext('link')">Copy</button>
<textarea id="link" cols=80 rows=20 readonly class="withdrawn"></textarea><br>
<h3 id="md_t" class="withdrawn">Markdown</h3><button onclick="copytext('md')">Copy</button>
<textarea id="md" cols=80 rows=20 readonly class="withdrawn"></textarea><br>
<h3 id="mw_t" class="withdrawn">MediaWiki</h3><button onclick="copytext('mw')">Copy</button>
<textarea id="mw" cols=80 rows=20 readonly class="withdrawn"></textarea><br>
<h3 id="ht_t" class="withdrawn">HTML</h3><button onclick="copytext('ht')">Copy</button>
<textarea id="ht" cols=80 rows=20 readonly class="withdrawn"></textarea><br>
<script>
var args=new URLSearchParams(window.location.search);
if(args.has('link')){
    document.getElementById('error').remove();
    document.getElementById('detailed').remove();
    var decoded=atob(args.get('link').replaceAll('_','=').replaceAll('@','+').replaceAll('$','/'));
    var lang=atob((new URLSearchParams('?'+decoded.split('?')[1])).get('lang').replaceAll('_','=').replaceAll('@','+').replaceAll('$','/'));
    document.getElementById('link').className='shown';
    document.getElementById('link_t').className='shown';
    document.getElementById('link').value=decoded;
    document.getElementById('md').className='shown';
    document.getElementById('md_t').className='shown';
    document.getElementById('md').value='['+lang+']'+'('+decoded+')';
    document.getElementById('mw').className='shown';
    document.getElementById('mw_t').className='shown';
    document.getElementById('mw').value='['+decoded+' '+lang+']';
    document.getElementById('ht').className='shown';
    document.getElementById('ht_t').className='shown';
    document.getElementById('ht').value=`<a href="${decoded}">${lang}</a>`;
}
function copytext(id){
    try{
        navigator.clipboard.writeText(document.getElementById(id).value);
    }catch(err){
        alert('Copy failed');
        return;
    }
    alert('Copy success');
}
</script>
</body>
</html>